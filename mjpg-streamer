f_message(){
        echo "[+] $1"
}

# Carry out specific functions when asked to by the system
case "$1" in
        start)
                f_message "Starting mjpg_streamer"
sudo /home/pi/mjpg-streamer/mjpg_streamer -b -i "/home/pi/mjpg-streamer/input_uvc.so -y -f 5 -d /dev/video0" -o "/home/pi/mjpg-streamer/output_http.so -w /home/pi/mjpg-streamer/www -p 9000"
                sleep 2
                f_message "mjpg_streamer started"mer/mjpg_streamer -b -i "/home/pi/mjpg-streamer/input_uvc.so -r VGA -f 5 -d /dev/video0" -o
                ;;
        stop)
                f_message "Stopping mjpg_streamer..."
                killall mjpg_streamer
                f_message "mjpg_streamer stopped".
                ;;
        restart)
                f_message "Restarting daemon: mjpg_streamer"
                killall mjpg_streamer
sudo /home/pi/mjpg-streamer/mjpg_streamer -b -i "/home/pi/mjpg-streamer/input_uvc.so -r VGA -f 5 -d /dev/video0" -o

"/home/pi/mjpg-streamer/output_http.so -w /home/pi/mjpg-streamer/www -p 9000 -c user:pass"
sudo /home/pi/mjpg-streamer/mjpg_streamer -b -i "/home/pi/mjpg-streamer/input_uvc.so -r VGA -f 5 -d /dev/video1" -o

"/home/pi/mjpg-streamer/output_http.so -w /home/pi/mjpg-streamer/www -p 9001 -c user:pass"
                sleep 2
                f_message "Restarted daemon: mjpg_streamer"
                ;;
        status)
                pid=`ps -A | grep mjpg_streamer | grep -v "grep" | grep -v mjpg_streamer. | awk '{print $1}' | head -n 1`
                if [ -n "$pid" ];
                then
                        f_message "mjpg_streamer is running with pid ${pid}"
                        f_message "mjpg_streamer was started with the following command line"
                        cat /proc/${pid}/cmdline ; echo ""
                else
                        f_message "Could not find mjpg_streamer running"
                fi
                ;;
        *)
esac
# thanks Mr.Vincent
